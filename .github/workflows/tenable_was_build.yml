name: Reuben's Tenable WAS Build Pipeline

on:
  push:
    branches:
      - main  # Or whichever branch you want to trigger the pipeline

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Copy API Keys to secret storage
      run: |
        # Copy your generated API keys to your preferred secret storage provider here
        
    - name: Pull Tenable/WAS Scanner Docker image
      run: docker pull tenable/was-scanner:latest

    - name: Run Tenable/WAS Scanner
      run: |
        docker run -e WAS_MODE=cicd \
                   -e ACCESS_KEY=${{ secrets.TENABLE_IO_ACCESS_KEY }} \
                   -e SECRET_KEY=${{ secrets.TENABLE_IO_SECRET_KEY }} \
                   -v $PWD:/scanner \
                   tenable/was-scanner:latest

